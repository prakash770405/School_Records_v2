<%- include('../includes/header') %>

<body class="bg-light text-black">
  <%- include('../includes/navbar') %>
  <%- include("../includes/flash") %>


  <!-- PAGE HEADER -->
  <header class="container py-2 mb-3">

    <!-- Title + Count -->
    <div class="d-flex align-items-center flex-wrap gap-2">

      <h1 class="h3 mb-0 text-success fw-semibold">
        <i class="fa-solid fa-users me-1"></i> All Students
      </h1>

      <span
        class="badge bg-success bg-opacity-10 text-success  rounded-pill fw-semibold ms-auto d-inline ">
        Total :- <%= count %>
      </span>

    </div>

    <!-- Subtitle -->
    <p class="text-muted mt-1 mb-3 d-none d-md-block fst-italic">
      Class roster and contact information for School_Records
    </p>

    <!-- Search -->
    <div class="mt-3">
      <div class="input-group border-0">
        <span class="input-group-text bg-success text-white rounded-start-pill border-0">
          <i class="fa-solid fa-magnifying-glass"></i>
        </span>

        <input
          type="text"
          id="searchInput"
          class="form-control bg-success bg-opacity-10 rounded-end-pill shadow-none border-0"
          placeholder="Search students name..."
        >
      </div>

      <div
        id="noResults"
        class="alert alert-warning mt-3 rounded-pill d-none text-secondary fw-semibold text-center ">
        No matching students found.
      </div>
    </div>

  </header>

  <!-- STUDENT GRID -->
  <div class="container pb-4">

    <div class="row g-4">
      <% for (let loads of load) { %>

        <div class="col-12 col-sm-6 col-md-4 col-lg-3">
          <div
            class="card h-100 border-0 shadow-sm rounded-4 overflow-hidden student-card">

            <!-- Image -->
            <a href="/students/view/<%= loads.id %>"
               class="text-decoration-none text-reset position-relative d-block">

              <% if (loads.img) { %>
                <img
                  src="<%= loads.img.url %>"
                  class="card-img-top student-img"
                  alt="Student Image"
                >
              <% } %>
<div
                  class="card-img-overlay d-flex justify-content-between align-items-start p-2">
                  <span class=" small">
                    <%= (loads.img.photosize / (1024 * 1024)).toFixed(2) %> MB
                  </span>
                  <span class=" small">
                    <%= loads.img.phototype %>
                  </span>
                </div>
            </a>

            <!-- Info -->
            <ul class="list-group list-group-flush small">

              <li class="list-group-item">
                <i class="fa-regular fa-circle-user text-success me-1"></i>
                <strong>Name:</strong> <%= loads.name %>
              </li>

              <li class="list-group-item">
                <i class="fa-solid fa-clipboard-user text-success me-1"></i>
                <strong>Roll No:</strong> <%= loads.roll_no %>
              </li>

              <li class="list-group-item">
                <i class="fa-solid fa-graduation-cap text-success me-1"></i>
                <strong>Class:</strong> <%= loads.Class %>
              </li>

              <!-- Actions -->
              <li class="list-group-item">

                <a
                  href="/students/form/edit/<%= loads.id %>"
                  class="btn btn-outline-warning btn-sm ">
                  <i class="fa-regular fa-pen-to-square me-1"></i> Edit
                </a>

                <form
                  action="/students/form/<%= loads._id %>/delete?_method=DELETE"
                  method="post"
                  class="d-inline"
                  onsubmit="return confirm('Are you sure you want delete this student ?');">

                  <button
                    class="btn btn-outline-danger btn-sm ">
                    <i class="fa-solid fa-trash-can me-1"></i> Delete
                  </button>

                </form>

              </li>

            </ul>

          </div>
        </div>

      <% } %>
    </div>
  </div>

  <%- include('../includes/footer') %>
</body>
